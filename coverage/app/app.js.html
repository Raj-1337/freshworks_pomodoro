<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for app/app.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">app/</a> app.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">59.8% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>61/102</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">37.5% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>3/8</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">51.61% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>16/31</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">59.8% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>61/102</span>
      </div>
    </div>
  </div>
  <div class='status-line medium'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266</td><td class="line-coverage quiet"><span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">let client = null;
let user_id = null;
let stage = false;
let t1 = null,
  t2 = null,
  t3 = null,
  t4 = null;
let endTime = null;
$(document).ready(function() {
  app.initialized().then(function(_client) {
    client = _client;
    client.events.on("app.activated", function() {
      console.log("checkTimer start");
      checkTimer();
      console.log("checkTimer end");
      /**
       * get the id of the user loged in using the data API
       */
      client.data.get("loggedInUser").then(
        function(data) {
          user_id = data.loggedInUser.user.id.toString();
        },
        function(err) <span class="fstat-no" title="function not covered" >{</span>
<span class="cstat-no" title="statement not covered" >          console.log(JSON.stringify(err));</span>
        }
      );
&nbsp;
      /**
       * a click event handler to start and stop pomodoro sessions
       */
      $("#ip").click(function() {
        if (!stage) {
          makeSMICall("serverMethod");
          t2 = setInterval(takeBreak, 40000, user_id);
          startTimer();
          countdown();
          session();
          stopText();
          stage = true;
        } else {
          stopPomodoro();
          // startText();
          // stopTimer();
<span class="cstat-no" title="statement not covered" >          stage = false;</span>
        }
      });
&nbsp;
      /** a click event handler to get user's past sessions data, process it and pass it to a modal to show output in chart form
       * refer mod.js for flow continuation
       */
      $("#sa").click(function() <span class="fstat-no" title="function not covered" >{</span>
        let hs = <span class="cstat-no" title="statement not covered" >[];</span>
        let td = <span class="cstat-no" title="statement not covered" >null;</span>
<span class="cstat-no" title="statement not covered" >        client.db.get(user_id).then(</span>
          function(data) <span class="fstat-no" title="function not covered" >{</span>
<span class="cstat-no" title="statement not covered" >            console.log(data);</span>
<span class="cstat-no" title="statement not covered" >            td = data.totalDays;</span>
<span class="cstat-no" title="statement not covered" >            data.history.forEach((element, index) =&gt; <span class="fstat-no" title="function not covered" >{</span></span>
<span class="cstat-no" title="statement not covered" >              hs.push([</span>
                index + 1,
                element.noOfSessions,
                element.noOfInterruptions
              ]);
            });
            client.interface.trigger("showModal", {
              title: "sample modal",
              template: "./mod.html",
              data: { totalDays: td, history: hs }
            });
          },
          function(err) <span class="fstat-no" title="function not covered" >{</span>
<span class="cstat-no" title="statement not covered" >            console.log(</span>
              "Couldn't get data for ShowActivity!\nargs: " +
                JSON.stringify(err)
            );
          }
        );
      });
&nbsp;
      /** a click event handler to clear all of the user's activity and schedules using clearActivity server.js method */
      $("#ca").click(function() {
        makeSMICall("clearActivity");
      });
&nbsp;
      /** a click event handler to populate user data randomly using testData server.js method */
      $("#td").click(function() <span class="fstat-no" title="function not covered" >{</span>
        makeSMICall("testData");
      });
      // $('body').bind('beforeunload', saveTimer);
      // $(window).on("unload", saveTimer);
&nbsp;
      // $(window).on("beforeunload", {x: stage, y: endTime}, saveTimer);
      $(window).on("beforeunload", saveTimer);
    });
  });
});
&nbsp;
/**
 * a helper function to triggers notifications
 * @param {string} notificationType - type of notification to be triggered
 * @param {string} notificationMessage - notification message to be displayed
 */
function notifyUser(notificationType, notificationMessage) {
<span class="cstat-no" title="statement not covered" >  client.interface</span>
    .trigger("showNotify", {
      type: notificationType,
      message: notificationMessage
    })
    .then(function(data) <span class="fstat-no" title="function not covered" >{</span>
      console.log(
        "Notification for " + notificationMessage + " showed successfully!"
      );
      console.log(JSON.stringify(data));
    })
    .catch(function(err) {
      console.log(
        "Notification for " + notificationMessage + " couldn't be shown!"
      );
      console.log(JSON.stringify(err));
    });
}
&nbsp;
/**
 * simple function to change UI
 */
function startText() {
  $("#apptext").text("Click me to start focus mode!!!");
  $("#ip").html("start");
}
&nbsp;
/**
 * simple function to change UI
 */
function stopText() {
  $("#apptext").text("Click me to stop focus mode!!!");
<span class="cstat-no" title="statement not covered" >  $("#ip").html("stop");</span>
}
&nbsp;
/**
 * Function to show user that his session has started using a helper function
 */
function session() {
<span class="cstat-no" title="statement not covered" >  notifyUser("warning", "your 25 mins streak starts!");</span>
}
&nbsp;
/**
 * a function to tell users that they should take thier 5 mins break using a helper function
 * It also triggers nextSessionCheck and session functions to notfy about thier progress using js setTimeout
 */
function takeBreak() <span class="fstat-no" title="function not covered" >{</span>
<span class="cstat-no" title="statement not covered" >  notifyUser("success", "take a 5 mins break!");</span>
  // t3 = setTimeout(nextSessionCheck, 10000);
<span class="cstat-no" title="statement not covered" >  t1 = setTimeout(session, 20000);</span>
<span class="cstat-no" title="statement not covered" >  startTimer();</span>
<span class="cstat-no" title="statement not covered" >  countdown();</span>
}
&nbsp;
/**
 * This function is executed before the break period's end time to ask if the user
 * wants to continue having pomodoro sessions or not
 * They can give thier response using the showConfirm interface triggered by this method
 */
function nextSessionCheck() <span class="fstat-no" title="function not covered" >{</span>
<span class="cstat-no" title="statement not covered" >  client.interface</span>
    .trigger("showConfirm", {
      title: "Do you want to continue ?",
      message:
        "your break's about to be over, do you want to start a new pomodoro session ? "
    })
    .then(function(result) <span class="fstat-no" title="function not covered" >{</span>
<span class="cstat-no" title="statement not covered" >      console.log(JSON.stringify(result));</span>
<span class="cstat-no" title="statement not covered" >      if (result.message == "OK") {</span>
<span class="cstat-no" title="statement not covered" >        console.log("user is continuing with next session!");</span>
      } else {
<span class="cstat-no" title="statement not covered" >        console.log("user is stopping sessions!");</span>
<span class="cstat-no" title="statement not covered" >        stopPomodoro();</span>
      }
    })
    .catch(function(err) <span class="fstat-no" title="function not covered" >{</span>
<span class="cstat-no" title="statement not covered" >      console.log("error with showConfirm: " + JSON.stringify(err));</span>
      stopPomodoro();
      stage = false;
    });
}
&nbsp;
/**
 * This function invokes deleteSchedule server.js methods via a helper function
 * It also clears the setTimeout and setInterval events put forth by takeBreak and takebreak itself
 */
function stopPomodoro() {
  makeSMICall("deleteSchedule");
  clearTimeout(t1);
  clearTimeout(t3);
  clearInterval(t2);
  startText();
  stopTimer();
}
&nbsp;
/**
 * This is a helper function which calls server.js methods using client.request.invoke API (SMI)
 * Data for a particular user has been atached to his ID in the database, hence the need for pasing user_id via SMI
 * @param {string} - methodName name of the server.js method you wish to call
 */
function makeSMICall(methodName) {
  client.request.invoke(methodName, { id: user_id }).then(
    function(data) {
      console.log("server method request id: " + data.requestID);
      console.log("response: " + data.response.reply);
    },
    function(err) <span class="fstat-no" title="function not covered" >{</span>
<span class="cstat-no" title="statement not covered" >      console.log(JSON.stringify(err));</span>
    }
  );
}
&nbsp;
/** a function to save data of running counter using localstorage */
function saveTimer() <span class="fstat-no" title="function not covered" >{</span>
<span class="cstat-no" title="statement not covered" >  console.log("saveTimer invoked! stage: " + stage + " " + endTime);</span>
<span class="cstat-no" title="statement not covered" >  if (stage) {</span>
<span class="cstat-no" title="statement not covered" >    console.log("saving item" + stage + " " + endTime);</span>
<span class="cstat-no" title="statement not covered" >    localStorage.setItem(</span>
      "timerStorage",
      JSON.stringify({ state: stage, end: endTime })
    );
  }
}
&nbsp;
/** a function to set the session's end time and start countdown */
function startTimer() <span class="fstat-no" title="function not covered" >{</span>
<span class="cstat-no" title="statement not covered" >  endTime = new Date();</span>
<span class="cstat-no" title="statement not covered" >  endTime.setMinutes(endTime.getMinutes() + 1);</span>
<span class="cstat-no" title="statement not covered" >  t4 = setInterval(countdown, 999);</span>
}
&nbsp;
/** function to update the counter */
function countdown() <span class="fstat-no" title="function not covered" >{</span>
  let current = <span class="cstat-no" title="statement not covered" >endTime - new Date();</span>
  let minutes = <span class="cstat-no" title="statement not covered" >Math.floor((current % (1000 * 60 * 60)) / (1000 * 60));</span>
  let seconds = Math.floor((current % (1000 * 60)) / 1000);
  $("#timer").text(`${minutes} min  :  ${seconds} sec`);
}
&nbsp;
/** function to check if there is a running session, if so change the global variables which affetcs the UI and starts the timer */
function checkTimer() {
  console.log("inside");
  <span class="missing-if-branch" title="if path not taken" >I</span>if (localStorage.getItem("timerStorage") !== null) {
    let temp = <span class="cstat-no" title="statement not covered" >localStorage.getItem("timerStorage");</span>
<span class="cstat-no" title="statement not covered" >    temp = JSON.parse(temp);</span>
<span class="cstat-no" title="statement not covered" >    endTime = new Date(temp.end);</span>
<span class="cstat-no" title="statement not covered" >    stage = temp.state;</span>
<span class="cstat-no" title="statement not covered" >    stopText();</span>
    countdown();
    t4 = setInterval(countdown, 998);
  } else {
    console.log("no timerStorage");
  }
}
&nbsp;
/** function to remove countdown and endTime */
function stopTimer() {
  endTime = null;
  $("#timer").empty();
<span class="cstat-no" title="statement not covered" >  clearInterval(t4);</span>
<span class="cstat-no" title="statement not covered" >  localStorage.removeItem("timerStorage");</span>
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Fri Mar 06 2020 15:55:28 GMT+0530 (India Standard Time)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
